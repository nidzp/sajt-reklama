<!DOCTYPE html>
<html lang="sr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sajt Reklama - AI Powered Advertising Platform</title>
    <meta
      name="description"
      content="Modern advertising platform with AI chatbot assistant, admin panel and GDPR cookie consent system."
    />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lustria&family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/public/cookie-styles.css" />
    <link rel="stylesheet" href="/public/chatbot-styles.css" />
  </head>
  <body>
    <header
      class="site-header"
      style="
        padding: 1rem 0;
        background: var(--color-surface);
        box-shadow: var(--shadow-header);
      "
    >
      <div
        class="container"
        style="
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 1rem;
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        <a
          href="/"
          class="wordmark"
          style="
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-accent-bright);
            text-decoration: none;
          "
          >Sajt Reklama</a
        >
        <nav style="display: flex; gap: 2rem; align-items: center">
          <a href="/" style="color: var(--color-text); text-decoration: none"
            >Home</a
          >
          <a
            href="/upload.html"
            style="color: var(--color-text); text-decoration: none"
            >Upload</a
          >
          <a
            href="/portfolio.html"
            style="color: var(--color-text); text-decoration: none"
            >Portfolio</a
          >
        </nav>
      </div>
    </header>

    <main>
      <section
        style="
          padding: 4rem 0;
          text-align: center;
          background: linear-gradient(
            180deg,
            var(--color-bg-gradient-start) 0%,
            var(--color-bg-gradient-mid) 50%,
            var(--color-bg-gradient-end) 100%
          );
        "
      >
        <div
          class="container"
          style="max-width: 1200px; margin: 0 auto; padding: 0 1rem"
        >
          <h1
            style="
              font-size: 3rem;
              margin-bottom: 1rem;
              background: linear-gradient(
                135deg,
                var(--color-accent-bright),
                var(--color-accent)
              );
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              background-clip: text;
            "
          >
            Sajt Reklama Platform
          </h1>
          <p
            style="
              font-size: 1.25rem;
              color: var(--color-text-soft);
              margin-bottom: 2rem;
            "
          >
            Moderna platforma za prikaz i upravljanje reklamama sa AI chatbot
            asistentom
          </p>
          <div
            style="
              display: flex;
              gap: 1rem;
              justify-content: center;
              flex-wrap: wrap;
            "
          >
            <a
              href="/upload.html"
              class="cta-button"
              style="
                display: inline-block;
                padding: 1rem 2rem;
                background: linear-gradient(
                  135deg,
                  var(--color-accent),
                  var(--color-accent-soft)
                );
                color: white;
                text-decoration: none;
                border-radius: 12px;
                font-weight: 600;
                transition: transform 0.3s ease;
              "
            >
              Upload Reklamu
            </a>
            <a
              href="/portfolio.html"
              class="cta-button"
              style="
                display: inline-block;
                padding: 1rem 2rem;
                background: var(--color-overlay-deep);
                border: 2px solid var(--border-strong);
                color: var(--color-text);
                text-decoration: none;
                border-radius: 12px;
                font-weight: 600;
                transition: transform 0.3s ease;
              "
            >
              View Portfolio
            </a>
          </div>
        </div>
      </section>

      <section id="features" style="padding: 4rem 0">
        <div
          class="container"
          style="max-width: 1200px; margin: 0 auto; padding: 0 1rem"
        >
          <h2
            style="
              text-align: center;
              font-size: 2.5rem;
              margin-bottom: 3rem;
              color: var(--color-text-bright);
            "
          >
            Platform Features
          </h2>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
              gap: 2rem;
            "
          >
            <div
              style="
                padding: 2rem;
                background: var(--color-overlay-panel);
                border-radius: 16px;
                border: 1px solid var(--border-soft);
              "
            >
              <h3
                style="
                  font-size: 1.5rem;
                  margin-bottom: 1rem;
                  color: var(--color-accent-bright);
                "
              >
                🤖 AI Chatbot
              </h3>
              <p style="color: var(--color-text-soft)">
                Groq-powered AI asistent za korisnički servis sa automatskim
                fallback odgovorima
              </p>
            </div>
            <div
              style="
                padding: 2rem;
                background: var(--color-overlay-panel);
                border-radius: 16px;
                border: 1px solid var(--border-soft);
              "
            >
              <h3
                style="
                  font-size: 1.5rem;
                  margin-bottom: 1rem;
                  color: var(--color-accent-bright);
                "
              >
                📱 Responsive Design
              </h3>
              <p style="color: var(--color-text-soft)">
                Moderan UI sa gradient animacijama i smooth transitions, radi na
                svim uređajima
              </p>
            </div>
            <div
              style="
                padding: 2rem;
                background: var(--color-overlay-panel);
                border-radius: 16px;
                border: 1px solid var(--border-soft);
              "
            >
              <h3
                style="
                  font-size: 1.5rem;
                  margin-bottom: 1rem;
                  color: var(--color-accent-bright);
                "
              >
                🛡️ Sigurnost
              </h3>
              <p style="color: var(--color-text-soft)">
                Helmet, CORS, Rate Limiting, Input validation - sve najbolje
                security prakse
              </p>
            </div>
            <div
              style="
                padding: 2rem;
                background: var(--color-overlay-panel);
                border-radius: 16px;
                border: 1px solid var(--border-soft);
              "
            >
              <h3
                style="
                  font-size: 1.5rem;
                  margin-bottom: 1rem;
                  color: var(--color-accent-bright);
                "
              >
                🍪 GDPR Compliant
              </h3>
              <p style="color: var(--color-text-soft)">
                Cookie consent sistem sa podešavanjima za potpunu usklađenost sa
                GDPR
              </p>
            </div>
            <div
              style="
                padding: 2rem;
                background: var(--color-overlay-panel);
                border-radius: 16px;
                border: 1px solid var(--border-soft);
              "
            >
              <h3
                style="
                  font-size: 1.5rem;
                  margin-bottom: 1rem;
                  color: var(--color-accent-bright);
                "
              >
                🚀 Vercel Ready
              </h3>
              <p style="color: var(--color-text-soft)">
                Instant deployment sa automatskim SSL, global CDN i preview URLs
              </p>
            </div>
            <div
              style="
                padding: 2rem;
                background: var(--color-overlay-panel);
                border-radius: 16px;
                border: 1px solid var(--border-soft);
              "
            >
              <h3
                style="
                  font-size: 1.5rem;
                  margin-bottom: 1rem;
                  color: var(--color-accent-bright);
                "
              >
                📊 Analytics Ready
              </h3>
              <p style="color: var(--color-text-soft)">
                Google Analytics integracija za detaljno praćenje performansi
              </p>
            </div>
          </div>
        </div>
      </section>

      <section
        id="ads"
        style="padding: 4rem 0; background: var(--color-overlay-soft)"
      >
        <div
          class="container"
          style="max-width: 1200px; margin: 0 auto; padding: 0 1rem"
        >
          <h2
            style="
              text-align: center;
              font-size: 2.5rem;
              margin-bottom: 3rem;
              color: var(--color-text-bright);
            "
          >
            Trenutne Reklame
          </h2>
          <div
            id="adsContainer"
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
              gap: 2rem;
            "
          >
            <div
              style="
                text-align: center;
                padding: 3rem;
                color: var(--color-text-soft);
              "
            >
              <div style="font-size: 3rem; margin-bottom: 1rem">⏳</div>
              <p>Učitavanje reklama...</p>
            </div>
          </div>
        </div>
      </section>

      <section id="tech-stack" style="padding: 4rem 0">
        <div
          class="container"
          style="max-width: 1200px; margin: 0 auto; padding: 0 1rem"
        >
          <h2
            style="
              text-align: center;
              font-size: 2.5rem;
              margin-bottom: 3rem;
              color: var(--color-text-bright);
            "
          >
            Tech Stack
          </h2>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: 1.5rem;
              text-align: center;
            "
          >
            <div>
              <h3
                style="color: var(--color-accent-bright); margin-bottom: 0.5rem"
              >
                Backend
              </h3>
              <p style="color: var(--color-text-soft)">Node.js + Express</p>
            </div>
            <div>
              <h3
                style="color: var(--color-accent-bright); margin-bottom: 0.5rem"
              >
                AI
              </h3>
              <p style="color: var(--color-text-soft)">Groq SDK + LLaMA 3</p>
            </div>
            <div>
              <h3
                style="color: var(--color-accent-bright); margin-bottom: 0.5rem"
              >
                Security
              </h3>
              <p style="color: var(--color-text-soft)">
                Helmet + CORS + Rate Limiting
              </p>
            </div>
            <div>
              <h3
                style="color: var(--color-accent-bright); margin-bottom: 0.5rem"
              >
                Deploy
              </h3>
              <p style="color: var(--color-text-soft)">
                Vercel + GitHub Actions
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer
      class="site-footer"
      style="
        padding: 2rem 0;
        background: var(--color-surface);
        text-align: center;
        border-top: 1px solid var(--border-subtle);
      "
    >
      <div
        class="container"
        style="max-width: 1200px; margin: 0 auto; padding: 0 1rem"
      >
        <p style="color: var(--color-text-soft); margin-bottom: 1rem">
          &copy; 2025 Sajt Reklama. AI-Powered Advertising Platform.
        </p>
        <div
          style="
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="color: var(--color-text-soft); text-decoration: none"
            >Home</a
          >
          <a
            href="/upload.html"
            style="color: var(--color-text-soft); text-decoration: none"
            >Upload</a
          >
          <a
            href="/portfolio.html"
            style="color: var(--color-text-soft); text-decoration: none"
            >Portfolio</a
          >
          <a
            href="https://github.com/nidzp/sajt-reklama"
            target="_blank"
            rel="noopener"
            style="color: var(--color-text-soft); text-decoration: none"
            >GitHub</a
          >
        </div>
      </div>
    </footer>

    <script src="/public/cookie-consent.js"></script>
    <script src="/public/chatbot.js"></script>
    <script>
      const API_URL =
        window.location.hostname === "localhost"
          ? "http://localhost:3000/api"
          : "/api";

      async function loadAds() {
        try {
          const response = await fetch(`${API_URL}/ads`);

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const ads = await response.json();
          displayAds(ads);
        } catch (error) {
          console.error("Greška pri učitavanju reklama:", error);
          document.getElementById("adsContainer").innerHTML =
            '<div style="text-align: center; padding: 3rem; color: var(--color-error);"><p>⚠️ Greška pri učitavanju reklama. Molimo osvežite stranicu.</p></div>';
        }
      }

      function displayAds(ads) {
        const container = document.getElementById("adsContainer");

        if (ads.length === 0) {
          container.innerHTML =
            '<div style="text-align: center; padding: 3rem; color: var(--color-text-soft);"><p>📢 Trenutno nema dostupnih reklama. Budite prvi!</p><a href="/upload.html" class="cta-button" style="display: inline-block; margin-top: 1rem; padding: 1rem 2rem; background: linear-gradient(135deg, var(--color-accent), var(--color-accent-soft)); color: white; text-decoration: none; border-radius: 12px; font-weight: 600;">Dodaj Reklamu</a></div>';
          return;
        }

        container.innerHTML = ads
          .map(
            (ad) => `
            <div style="position: relative; border-radius: 16px; overflow: hidden; background: var(--color-overlay-panel); border: 1px solid var(--border-soft); transition: transform 0.3s ease, box-shadow 0.3s ease;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='var(--shadow-lift)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
              <a href="${ad.link}" target="_blank" rel="noopener" style="display: block; text-decoration: none;">
                <img src="${ad.image}" alt="Reklama" style="width: 100%; height: 250px; object-fit: cover;" loading="lazy" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27400%27 height=%27250%27%3E%3Crect fill=%27%23222%27 width=%27400%27 height=%27250%27/%3E%3Ctext fill=%27%23666%27 font-family=%27Arial%27 font-size=%2720%27 x=%2750%25%27 y=%2750%25%27 text-anchor=%27middle%27%3ENo Image%3C/text%3E%3C/svg%3E';">
                <div style="padding: 1rem;">
                  <p style="color: var(--color-text-soft); font-size: 0.9rem; margin: 0;">Klikni za više info</p>
                </div>
              </a>
              <button onclick="deleteAd(${ad.id})" style="position: absolute; top: 10px; right: 10px; background: rgba(255, 0, 0, 0.8); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-weight: bold; transition: background 0.3s ease;" onmouseover="this.style.background='rgba(255, 0, 0, 1)';" onmouseout="this.style.background='rgba(255, 0, 0, 0.8)';">×</button>
            </div>
          `
          )
          .join("");
      }

      async function deleteAd(id) {
        if (!confirm("Da li ste sigurni da želite da obrišete ovu reklamu?")) {
          return;
        }

        try {
          const response = await fetch(`${API_URL}/ads/${id}`, {
            method: "DELETE",
          });

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          loadAds();
        } catch (error) {
          console.error("Greška pri brisanju:", error);
          alert("Greška pri brisanju reklame. Pokušajte ponovo.");
        }
      }

      // Load ads on page load
      loadAds();

      // Refresh ads every 30 seconds
      setInterval(loadAds, 30000);
    </script>
  </body>
</html>
